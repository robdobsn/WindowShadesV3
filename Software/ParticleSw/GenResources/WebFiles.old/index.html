<!DOCTYPE html>
<html>
	<head>
	<title>Office Blinds Control</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript">
        function callAjax(url, callback)
        {
            var xmlhttp;
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function()
            {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                {
                    callback(xmlhttp.responseText);
                }
            }

            xmlhttp.open("GET", url, true);
            xmlhttp.send();
        }
        function ajaxCallback()
        {
        }
		function shadeInfoCallback(jsonResp)
		{
//			jsonData = JSON.parse(jsonResp);
			jsonData = { name: "Office Blinds", shades: [ { name: "Shade1", num: "1" }, { name: "Shade2", num: "2" } ] };
			genShadeHead(jsonData);
			genShadeList(jsonData);
		}
		function genShadeHead(shadesData)
		{
			var headerDiv = document.getElementById("shadesHeader");
			var headStr = "<div class='shade-header'>";
			headStr += shadesData.name;
			headStr += '</div>\r\n';
			headerDiv.innerHTML = headStr;
		}
		function genShadeList(shadesData)
		{
			var shadesDiv = document.getElementById("shadeList");
			var listStr = "<div class='shade-list'>";
		    for (var shadeIdx = 0; shadeIdx < shadesData.shades.length; shadeIdx++)
			{
				var shadeInfo = shadesData.shades[shadeIdx];
				if (!window.windowShadeState.isAdvanced)
				{
					listStr += getNormalSettings(shadeInfo, shadeIdx);
				}
				else
				{
					listStr += getAdvancedSettings(shadeInfo, shadeIdx);
				}
		    }
		    listStr += '</div>\r\n';
			shadesDiv.innerHTML = listStr;
		}
		function toggleAdvanced()
		{
			window.windowShadeState.isAdvanced = !window.windowShadeState.isAdvanced;
			updateDisplay();
		}
		function updateDisplay()
		{
			shadeInfoCallback();
		}
		function bodyIsLoaded()
		{
			window.windowShadeState = { isAdvanced: false };
			updateDisplay();
		}
		function getNormalSettings(shadeInfo, shadeIdx)
		{
			var exStr = "";
			exStr += "<div class='shade-group'>\r\n"
			exStr += "<div class='shade-name'>" + shadeInfo.name + "</div>\r\n";
			exStr += "<div class='shade-list-line'>"
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/up/pulse',ajaxCallback)\">Up</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/stop/pulse',ajaxCallback)\">Stop</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/down/pulse',ajaxCallback)\">Down</a></div>\r\n";
			exStr += "</div>"
			exStr += "</div>\r\n";
			return exStr;

		}
		function getAdvancedSettings(shadeInfo, shadeIdx)
		{
			var exStr = "";
			exStr += "<div class='shade-group'>\r\n"
			exStr += "<div class='shade-name'>" + shadeInfo.name + "</div>\r\n";
			// Up
			exStr += "<div class='shade-list-line'>"
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/up/pulse',ajaxCallback)\">Up</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/up/on',ajaxCallback)\">UpOn</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/up/off',ajaxCallback)\">UpOff</a></div>\r\n";
			exStr += "</div>"
			// Stop
			exStr += "<div class='shade-list-line'>"
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/stop/pulse',ajaxCallback)\">Stop</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/stop/on',ajaxCallback)\">StopOn</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/stop/off',ajaxCallback)\">StopOff</a></div>\r\n";
			exStr += "</div>"
			// Down
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/down/pulse',ajaxCallback)\">Down</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/down/on',ajaxCallback)\">DownOn</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/down/off',ajaxCallback)\">DownOff</a></div>\r\n";
			// Rotation
			exStr += "<div class='shade-list-comment'>Rotation: press the Up to check the direction - if the shade falls then StopOn button until the shade jogs and direction is modified - then StopOff</div>\r\n";
			// Up Limit Initial
			exStr += "<div class='shade-list-comment'>Up Limit Initially: press UpOn or DownOn until at desired position, then UpLimitOn/DownLimitOn, then xxLimitOff when blind moves, then StopOn until jogs, then StopOff</div>\r\n";
			// Up Limit Adjust
			exStr += "<div class='shade-list-comment'>Up Limit Adust: press Up or Down to move to limit to adjust, then UpLimitOn/DownLimitOn, then xxLimitOff when jogs, then UpOn or DownOn to move to required position, then StopOn until jogs, then StopOff</div>\r\n";
			// Limit buttons
			exStr += "<div class='shade-list-line'>"
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/setuplimit/pulse',ajaxCallback)\">UpLimit</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/setuplimit/on',ajaxCallback)\">UpLimitOn</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/setuplimit/off',ajaxCallback)\">UpLimitOff</a></div>\r\n";
			exStr += "</div>"
			exStr += "<div class='shade-list-line'>"
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/setdownlimit/pulse',ajaxCallback)\">DownLimit</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/setdownlimit/on',ajaxCallback)\">DownLimitOn</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/setdownlimit/off',ajaxCallback)\">DownLimitOff</a></div>\r\n";
			exStr += "</div>"
			// Reset memory
			exStr += "<div class='shade-list-comment'>Reset Memory: press the ResetOn button below and then ResetOff once the shade jogs three times</div>\r\n";
			exStr += "<div class='shade-list-line'>"
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/resetmemory/pulse',ajaxCallback)\">Reset</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/resetmemory/on',ajaxCallback)\">ResetOn</a></div>\r\n";
			exStr += "<div class='shade-list-item'><a href='#' onclick=\"callAjax('/blind/" + shadeInfo.num +"/resetmemory/off',ajaxCallback)\">ResetOff</a></div>\r\n";
			exStr += "</div>"
			// Roller speed
			exStr += "<div class='shade-list-comment'>Roller Speed: press StopOn until jogs twice, then StopOff, shade moves up and down, press Up/Down to increase/decrease speed, press StopOn until jogs, then StopOff</div>\r\n";
			// My Position
			exStr += "<div class='shade-list-comment'>Set My Position: move to desired position using Up/Down/Stop, then StopOn until jogs, then StopOff</div>\r\n";
			exStr += "<div class='shade-list-comment'>Delete My Position: move to position, then StopOn until jogs, then StopOff</div>\r\n";
			exStr += "</div>\r\n"
			return exStr;
		}
    </script>
    <style>
	body {
	  font-family: Helvetica;
	  line-height: 1.4em;
	  font-size:12pt;
	  background-color: #000000;
	  color: #c0c0c0;
	}
	.shade-header{
	  padding: 20px;
	  background-color: #000000;
	  width: 100%;
	  font-size: 2em;
	  color: #f0f0f0;
	  text-align: center;
	}
	.shade-list{
	}
	.shade-group{
	}
	.shade-name{
	  padding: 10px;
	  background-color: #303030;
	  width: 100%;
	  font-size: 1.5em;
	  color: #ffffff;
	}
	.shade-list-line{
		display:block;
		padding: 10px;
	}
	.shade-list-item{
		display: inline;
	  padding: 10px;
	  padding-left: 30px;
	  width: 100%;
	  font-size: 1.5em;
	  color: #ffffff;
	}
	.shade-list-horz {
		display: inline;
		padding: 10px;
  	  padding-left: 20px;
  	  width: 100%;
  	  font-size: 1.5em;
  	  color: #ffffff;
	}
	.shade-list-item a {
	  text-decoration: none;
	  color: #2453f0;
	}
	.shade-advanced {
		padding: 20px;
  	  background-color: #404040;
  	  width: 100%;
  	  font-size: 1em;
  	  color: #000000;
  	  text-align: center;
	}
	.shade-advanced a {
	  text-decoration: none;
	  color: #2453f0;
	}
    </style>
</head>
<body onload="bodyIsLoaded()">

<div>

	<div id="shadesHeader"></div>
    <!-- <div class="hd-com"><div class="hd-ico"><a href="commiss.htm"></a></div></div> -->
	<div id="shadeList"></div>

	<div id="shadeAdvanced" class="shade-advanced"><a href="#" onclick="toggleAdvanced()">Advanced</a></div>
</div>

</body>
</html>
